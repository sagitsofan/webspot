<html ng-app="ctrlCode" ng-cloak>
<head>
<link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
<link rel="icon" href="/favicon.ico" type="image/x-icon">


    <link rel="apple-touch-icon" sizes="57x57" href="/assets/global/favicons/apple-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="/assets/global/favicons/apple-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/assets/global/favicons/apple-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="/assets/global/favicons/apple-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="/assets/global/favicons/apple-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="/assets/global/favicons/apple-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="/assets/global/favicons/apple-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/assets/global/favicons/apple-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/assets/global/favicons/apple-icon-180x180.png">
    <link rel="icon" type="image/png" sizes="192x192"  href="/assets/global/favicons/android-icon-192x192.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/assets/global/favicons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="96x96" href="/assets/global/favicons/favicon-96x96.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/assets/global/favicons/favicon-16x16.png">

    <link href="../../assets/global/plugins/bootstrap/css/bootstrap.min.css" rel="stylesheet" type="text/css" />
    <!--<link href="/assets/global/css/components.css" id="style_components" rel="stylesheet" type="text/css" />-->
    <link href="/assets/global/css/code.css" rel="stylesheet" type="text/css" />

    <!-- JQUERY -->
    <script src="../../assets/global/plugins/jquery.min.js" type="text/javascript"></script>
    <script src="https://code.jquery.com/ui/1.11.2/jquery-ui.js"></script>

    <!-- ANGULAR SCRIPTS -->
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.3.14/angular.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.3.14/angular-route.js"></script>

    <script type="text/javascript" src="/assets/global/plugins/angular-ui/ui-bootstrap-tpls-0.13.4.min.js"></script>


    <script src="/assets/angular/appCode.js"></script>

    <!-- TREE -->
    <script type="text/javascript" src="/assets/global/plugins/angular-tree-control/angular-tree-control.js"></script>
    <!-- link for CSS when using the tree as a Dom element -->
    <link rel="stylesheet" type="text/css" href="/assets/global/plugins/angular-tree-control/css/tree-control.css">
    <!-- link for CSS when using the tree as an attribute -->
    <link rel="stylesheet" type="text/css" href="/assets/global/plugins/angular-tree-control/css/tree-control-attribute.css">

    

    <!-- ACE -->
    <script src="/assets/global/plugins/ace/src/ace.js" type="text/javascript" charset="utf-8"></script>
    <!-- ACE EXTENTION -->
    <script src="/assets/global/plugins/ace/src/mode-javascript.js" type="text/javascript" charset="utf-8"></script>
    <script src="/assets/global/plugins/ace/src/mode-html.js" type="text/javascript" charset="utf-8"></script>
    <script src="/assets/global/plugins/ace/src/mode-css.js" type="text/javascript" charset="utf-8"></script>

    <!-- RESIZER -->
    <script src="/assets/global/plugins/resizer/resizer.js" type="text/javascript" charset="utf-8"></script>
    <link rel="stylesheet" type="text/css" href="/assets/global/plugins/resizer/resizer.css" />

    <!-- Angular Notifty -->
    <script src="../../assets/global/plugins/ng-notify/ng-notify.min.js"></script>
    <link href="../../assets/global/plugins/ng-notify/ng-notify.min.css" rel="stylesheet" type="text/css">

    <!-- UnderScore -->
    <script src="/assets/global/plugins/underscore/underscore-min.js"></script>
    <script src="/assets/global/plugins/focus-me/focus-me.js"></script>

    
</head>
<body>
    <div class="container-fluid">
        <div id="appCodeController" ng-controller="codeController" ng-init="init()">
            <div id="topnav">
                <div class="row topHeader">
                    <div class="col-md-12">
                        <div class="headerBtn logo">
                            <img src="/assets/global/img/webspot-logo-white.png" style="height:30px;" />
                        </div>
                        <div class="headerBtn selected">
                            Code
                        </div>
                        <div class="headerBtn">
                            CMS
                        </div>
                        <div class="headerBtn">
                            Server
                        </div>
                        <div class="headerBtn">
                            Analytics
                        </div>
                        <div class="headerBtn">
                            Market
                        </div>
                        <div class="headerBtn user">
                            User
                        </div>
                    </div>
                </div>
            </div>
            <div id="sidebar">
                <!-- Your custom menu with dropdown-menu as default styling -->
                <div id="context-menu" style="position: absolute; z-index: 9999; top: 99px; left: 191.5px;" class="">
                    <ul class="dropdown-menu" role="menu">
                        <li>
                            <a ng-click="openFile()">
                                <i class="icon-user"></i> View
                            </a>
                        </li>
                        <li class="divider">
                        </li>
                        <li>
                            <a ng-click="showRenameModal()">
                                <i class="icon-user"></i> Rename
                            </a>
                        </li>
                        <li>
                            <a ng-click="addFileModal = true">
                                <i class="icon-present"></i> New file
                            </a>
                        </li>
                        <li>
                            <a ng-click="addFolderModal = true">
                                <i class="icon-basket"></i> New folder
                            </a>
                        </li>
                        <li>
                            <a ng-click="showUploadModal()">
                                <i class="icon-user"></i> Upload
                            </a>
                        </li>
                        <li class="divider">
                        </li>
                        <li>
                            <a ng-click="deleteModal = true">
                                <i class="icon-user"></i> Delete
                            </a>
                        </li>
                    </ul>
                </div>
                <!--<div style="height:42px;border-bottom:solid 1px #ddd;margin-bottom:20px;">
                    <input id="inptSearchTree" placeholder="Search..." ng-model="searchTree" />
                </div>-->
                <div style="height:25px;"></div>
                <treecontrol class="tree-light"
                             tree-model="treeData"
                             options="treeOptions"
                             on-node-toggle="showToggle(node, expanded, $parentNode, $index, $first, $middle, $last, $odd, $even)"
                             on-selection="showSelectedFile(node, selected, $parentNode, $index, $first, $middle, $last, $odd, $even)"
                             selected-node="currentNode">
                    <span class="treeItem" id="{{node._id}}" ng-dblclick="treeDblClick(node._id)">
                        <img ng-src="/assets/global/img/fileTypes/{{ getNodeType(node.name) }}.png" class="iconFileType" />
                        {{node.name}}
                    </span>
                </treecontrol>
            </div>

            <div id="content" ng-show="arrTabs.length > 0">
                
                <div id="top-content">
                    <div style="padding: 5px;" class="pull-right">
                      <div ng-click="save()" class="pull-right btnBase" ng-class="{'btnGreen':currentNode.isDirty}">
                          <input type="checkbox" id="chkIsAutoSave" style="margin:4px 0px 3px 0px;" ng-model="isAutoSave" />

                          <span ng-show="!isDirty">Save</span>
                          <!--isFileOpened:{{isFileOpened}}-->
                          <span ng-show="isDirty">Save<!--Last saved: {{fileLastSaved | date:'mediumTime' }}--></span>
                      </div>
                    </div>

                    <tabset>
                        <tab ng-repeat="tabItem in arrTabs track by $index" ng-click="tabChange(tabItem)" active="tabItem.isActiveTab">
                            <tab-heading>
                                <span>{{tabItem.name}}</span>
                                <span ng-show="tabItem.isDirty">*</span>
                                &nbsp;&nbsp;
                                <i ng-click="closeTab($event,$index,tabItem,currentNode);$event.stopPropagation();" class="glyphicon icon-remove-tab glyphicon-remove" style="font-size: 10px;"></i>
                            </tab-heading>
                            <pre class="editor" id="editor_{{tabItem._id}}"></pre>
                        </tab>
                    </tabset>
                </div>

                <div id="bottom-content" ng-dblclick="enlargeBottomTab()">
                    <div class="bottomContentToggle">
                        <div ng-class="{selected: currentBottomTab == 'CMS'}" ng-click="toggleBottomTab('CMS')">CMS</div>
                        <div ng-class="{selected: currentBottomTab == 'Preview'}" ng-click="toggleBottomTab('Preview')">Preview</div>
                    </div>
                    <div ng-show="currentBottomTab == 'CMS'">
                        <h3>{{currentNode.name}}</h3>
                        {{currentNode}}
                    </div>
                    <div ng-show="currentBottomTab == 'Preview'">
                        <iframe id="ifrmPreview" ng-src="{{getCurrentNodeUrl()}}" style="width:100%;height:100%;min-height:600px;border:0px;" frameborder="0"></iframe>
                    </div>
                </div>

                <div id="content-resizer"
                     resizer="horizontal"
                     resizer-height="6"
                     resizer-top="#top-content"
                     resizer-bottom="#bottom-content">
                </div>
            </div>

            <div id="sidebar-resizer"
                 resizer="vertical"
                 resizer-width="6"
                 resizer-left="#sidebar"
                 resizer-right="#content"
                 resizer-max="400"
                 resizer-min="1">
            </div>





            <!-- DELETE Dialog -->
            <div id="responsive" class="modal fade" modal="deleteModal" tabindex="-1" aria-hidden="true">
                <div class="modal-dialog">
                    <div class="modal-content">
                        <div class="modal-body">
                            <h1>Delete '<span ng-show="currentNode.type=='folder'">/</span>{{currentNode.name}}' <span ng-show="currentNode.type=='folder'">folder</span>?</h1>
                            <div class="scroller" style="height:100px" data-always-visible="1" data-rail-visible1="1">
                                <div class="row" style="margin-top:20px;margin-top:20px;text-align:center">
                                    <div class="col-md-12">
                                        <button ng-hide="showDeleteConfirm" type="button" class="btnBase btnRed" ng-click="showDeleteConfirm=true">Delete</button>
                                        <button ng-show="showDeleteConfirm" type="button" class="btnBase btnRed" ng-click="delete()">Confirm Delete</button>

                                        <button type="button" class="btnBase" ng-click="deleteModal = false;showDeleteConfirm=false">Cancel</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- UPLOAD Dialog -->
            <div id="responsive" class="modal fade" modal="uploadModal" tabindex="-1" aria-hidden="true">
                <div class="modal-dialog">
                    <div class="modal-content">
                        <div class="modal-body">
                            <h1>Upload files / folder</h1>
                            <div class="scroller" style="height:100px" data-always-visible="1" data-rail-visible1="1">
                                <div class="row">
                                    <div class="col-md-12">

                                        <div flow-init=""
                                             flow-file-success="handleFile( $file, $message, $flow )"
                                             flow-file-added="!!{png:1,gif:1,jpg:1,jpeg:1,html:1,js:1,css:1}[$file.getExtension()]"
                                             flow-name="uploader.flow"
                                             class="ng-scope">

                                            <div class="drop" flow-drop="" ng-class="dropClass" flow-drag-enter="style={border:'1px solid green'}" flow-drag-leave="style={}" ng-style="style">
                                                <span class="btn btn-default" flow-btn="">
                                                    Upload files
                                                    <input type="file" multiple="multiple" flow-directory ng-show="$flow.supportDirectory" style="visibility: hidden; position: absolute;">
                                                </span>
                                                <b>OR</b>
                                                Drag And Drop here
                                            </div>

                                            <div style="height:15px"></div>

                                            <div ng-repeat="file in uploader.flow.files">
                                                {{file.name}} <a ng-click="file.cancel()">X</a>
                                            </div>

                                        </div>

                                    </div>
                                </div>
                                <div class="row" style="margin-top:20px;margin-top:20px;text-align:center">
                                    <div class="col-md-12">
                                        <button type="button" class="btnBase btnBlue" ng-click="uploadModal = false">Cancel</button>
                                        <button type="button" class="btnBase" ng-click="uploadFiles()">Save</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- RENAME Dialog -->
            <div id="responsive" class="modal fade" modal="renameModal" tabindex="-1" aria-hidden="true">
                <div class="modal-dialog">
                    <div class="modal-content">
                        <div class="modal-body">
                            <h1>Rename {{currentNode.name}}</h1>
                            <div class="scroller" style="height:100px" data-always-visible="1" data-rail-visible1="1">
                                <div class="row">
                                    <div class="col-md-12">
                                        <input type="text" focus-me="renameModal" focus-me-readonly ng-model="fileToRename" placeholder="File name" class="col-md-12 form-control">
                                    </div>
                                </div>
                                <div class="row" style="margin-top:20px;margin-top:20px;text-align:center">
                                    <div class="col-md-12">
                                        <button type="button" class="btnBase btnBlue" ng-click="renameFile()">Save</button>
                                        <button type="button" class="btnBase" ng-click="renameModal = false">Cancel</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- FILE Dialog -->
            <div id="responsive" class="modal fade" modal="addFileModal" tabindex="-1" aria-hidden="true">
                <div class="modal-dialog">
                    <div class="modal-content">
                        <div class="modal-body">
                            <h1>Create new file in '{{getNewFileLocationName()}}'</h1>
                            <div class="scroller" style="height:100px" data-always-visible="1" data-rail-visible1="1">
                                <div class="row">
                                    <div class="col-md-12">
                                        <input type="text" focus-me="addFileModal" focus-me-readonly ng-model="newFile" placeholder="File name" class="col-md-12 form-control">
                                    </div>
                                </div>
                                <div class="row" style="margin-top:20px;margin-top:20px;text-align:center">
                                    <div class="col-md-12">
                                        <button type="button" class="btnBase btnBlue" ng-click="addNewFile(newFile)">Save</button>
                                        <button type="button" class="btnBase" ng-click="addFileModal = false">Cancel</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- FOLDER Dialog -->
            <div id="responsive" class="modal fade" modal="addFolderModal" tabindex="-1" aria-hidden="true">
                <div class="modal-dialog">
                    <div class="modal-content">
                        <div class="modal-body">
                            <h1>Create new folder in '{{getNewFileLocationName()}}'</h1>
                            <div class="scroller" style="height:100px" data-always-visible="1" data-rail-visible1="1">
                                <div class="row">
                                    <div class="col-md-12">
                                        <input type="text" focus-me="addFolderModal" focus-me-readonly ng-model="newFolder" placeholder="Folder name" class="col-md-12 form-control">
                                    </div>
                                </div>
                                <div class="row" style="margin-top:20px;margin-top:20px;text-align:center">
                                    <div class="col-md-12">
                                        <button type="button" class="btnBase btnBlue" ng-click="addNewFolder()">Save</button>
                                        <button type="button" class="btnBase" ng-click="addFolderModal = false">Cancel</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

    </div>

    <script src="../../assets/global/plugins/bootstrap-contextmenu/bootstrap-contextmenu.js"></script>
    <script type="text/javascript" src="../../assets/global/plugins/angular-bootstrap-modal/angular-ui-bootstrap-modal.js"></script>
    <script src="../../assets/admin/pages/scripts/components-context-menu.js" type="text/javascript"></script>

    <!-- BEGIN NG FLOW -->
    <script type="text/javascript" src="/assets/global/plugins/ng-flow/ng-flow-standalone.min.js"></script>
    <!-- END NG FLOW -->

    <script>
        ComponentsContextMenu.init(); // init context menu demo
    </script>
</body>
</html>
